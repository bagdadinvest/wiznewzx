{% extends "coderedcms/pages/web_page.html" %}
{% load wagtailcore_tags wagtailimages_tags coderedcms_tags static %}

{% block index_filters %}{% endblock %}
{% block index_content %}
{% if page.index_show_subpages %}

{% block content %}
<!-- Popular Items Section -->
<!-- Popular Items Section -->
<section class="popular-item-area fix pt-padding">
    <h2>Popular Items</h2>
    <div class="container-fluid p-0">
        <div class="custom-row">
            <div class="popular-item owl-carousel">
                {% for proposal in popular_items %}
                    <div class="single-items">
                        <div class="items-img">
                            <img src="{{ proposal.cover_image.file.url }}" alt="">
                            <div class="slider-caption">
                                <a href="{{ proposal.url }}" class="small-btn mb-10">{{ proposal.title }}</a>
                                <p>{{ proposal.publication_date|date:"d M Y" }} | by {{ proposal.display_author_as }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Trending Area Section -->
<section class="trending-area section-padding">
    <h2>Trending Now</h2>
    <div class="container">
        <div class="row">
            {% for proposal in trending_area %}
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="trending mb-30">
                        <div class="trend-top-img">
                            <img src="{{ proposal.cover_image.file.url }}" alt="">
                            <div class="trend-top-cap">
                                <h2><a href="{{ proposal.url }}">{{ proposal.title }}</a></h2>
                                <p>{{ proposal.publication_date|date:"d M Y" }} | by {{ proposal.display_author_as }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- What's New Section -->
<section class="whats-new-area pt-50 pb-20">
    <h2>What's New</h2>
    <div class="container">
        <div class="row">
            {% for proposal in whats_new %}
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="whats-new-item">
                        <img src="{{ proposal.cover_image.file.url }}" alt="">
                        <h3><a href="{{ proposal.url }}">{{ proposal.title }}</a></h3>
                        <p>{{ proposal.publication_date|date:"d M Y" }} | by {{ proposal.display_author_as }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Floating Popup for Selected Articles -->
<div id="selected-count-popup" class="position-fixed bottom-0 start-0 m-3 bg-light shadow-lg rounded p-3" style="display: none;">
    <p class="mb-0"><strong>Selected Articles: <span id="selected-count">0</span></strong></p>
</div>

{% endblock %}
{% endif %}
{% endblock %}

<style>
.proposal-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}
.proposal-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}
.tick-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
}
.selected .tick-icon {
    display: block;
}
.selected {
    border: 2px solid #28a745;
}
</style>
